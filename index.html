<style>
  [v-cloak] {
    opacity: 0;
  }
</style>

<script type="module">
  import { createApp } from './src'

  const t = document.getElementById('app')
  const tt = document.getElementById('target')

  function loop() {
    const target = t.cloneNode(true)
    const app = createApp()

    app.directive('red', ({ el }) => {
      el.style.color = 'red'
    })

    app.data('MyController', () => ({
      open: true,
      toggle() {
        this.open = !this.open
      },
      msg: 'show me!',
      classes: [{ ok: true }, 'oops']
    }))
    app.mount(target)
    tt.appendChild(target)
  }

  // const s = performance.now()
  // for (let i = 0; i < 1000; i++) {
  //   loop()
  // }
  // console.log(performance.now() - s)

  loop()
</script>

<div id="app" v-data="MyController()" v-cloak>
  <div v-if="open" v-red :class="classes">
    {{ msg }}
    <div @click="msg = 'reset'" v-if="msg.length < 10">
      (nested if: hidden when msg.length > 10)
    </div>
  </div>

  <template v-if="open">
    hello <span>some {{ msg }}</span> hello
  </template>

  <button @click="toggle" @click.right="alert('right click')">toggle</button>
  <button @click="msg += '!'">change msg</button>

  <input type="text" @keyup.x="console.log('yo')" />

  <div v-data="{ nested: 'nested scope' }">
    <p>{{ nested }}</p>
    <p>Parent scope data from nested: {{ msg }}</p>
  </div>
</div>

<div id="target"></div>
